<?xml version="1.0" encoding="utf-8"?>
<odoo>

  <record id="hr_employee_kanban_view_spa" model="ir.ui.view">
    <field name="name">hr_employee_kanban_view_spa</field>
    <field name="model">hr.employee</field>
    <field name="arch" type="xml">
      <kanban class="o_kanban_small_column o_kanban_mobile">
        <field name="name"/>
        <field name="display_name"/>
        <field name="image_128" widget="image" class="oe_kanban_image"/>
        <templates>
          <t t-name="kanban-box">
            <div class="oe_kanban_global_click position-relative"
                 style="
                   border:1px solid #d8d6e2;
                   border-radius:12px;
                   padding:12px 12px 34px 12px;
                   background:#fff;
                   box-shadow:0 2px 6px rgba(0,0,0,0.05);
                 ">

              <!-- Avatar + nombre -->
              <div class="d-flex align-items-center">
                <div class="me-2">
                  <img t-if="record.image_128.raw_value"
                       t-att-src="kanban_image('hr.employee', 'image_128', record.id.raw_value)"
                       class="rounded-circle"
                       style="
                         width:80px;
                         height:80px;
                         object-fit:cover;
                         border:2px solid #4f456f;
                       "/>
                  <t t-else="">
                    <div class="rounded-circle d-flex align-items-center justify-content-center"
                         style="
                           width:80px;
                           height:80px;
                           color:#4f456f;
                           border:2px solid #4f456f;
                         ">
                      <i class="fa fa-user" style="font-size:16px;"></i>
                    </div>
                  </t>
                </div>

                <div class="flex-grow-1" style="min-width:0;">
                  <div style="
                        font-weight:600;
                        color:#2b2440;
                        font-size:14px;
                        white-space:nowrap;
                        overflow:hidden;
                        text-overflow:ellipsis;
                      ">
                    <field name="display_name"/>
                  </div>
                </div>
              </div>

              <!-- Botón “+” -->
              <a name="open_service_wizard"
                 type="object"
                 title="Agregar servicio"
                 aria-label="Agregar servicio"
                 class="position-absolute d-flex align-items-center justify-content-center"
                 style="
                   bottom:10px;
                   right:10px;
                   width:22px;
                   height:22px;
                   border:2px solid #4f456f;
                   border-radius:50%;
                   color:#4f456f;
                   background:transparent;
                   text-decoration:none;
                   transition: background 0.2s, color 0.2s;
                 "
                 onmouseover="this.style.background='#4f456f20'"
                 onmouseout="this.style.background='transparent'">
                <i class="fa fa-plus" style="font-size:11px;"></i>
              </a>

            </div>
          </t>
        </templates>
      </kanban>
    </field>
  </record>

  <record id="hr_employee_action_view_spa" model="ir.actions.act_window">
    <field name="name">Employee Kanban</field>
    <field name="res_model">hr.employee</field>
    <field name="view_mode">kanban,tree,form</field>
    <field name="view_id" ref="spa.hr_employee_kanban_view_spa"/>
  </record>

  <menuitem id="menu_hr_employee_kanban"
            name="Employee Kanban"
            action="hr_employee_action_view_spa"/>
</odoo>
